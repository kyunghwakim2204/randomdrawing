<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ëœë¤ ê·¸ë¦¼ê·¸ë¦¬ê¸° ë„ì „ê²Œì„</title>
  <style>
    :root{
      --lavender:#E9E1FF;
      --mint:#CFF8EA;
      --ink:#2e2e2e;
      --card:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Pretendard","Noto Sans KR",system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,"ë§‘ì€ ê³ ë”•","Malgun Gothic",sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at -10% -20%, var(--mint) 0%, transparent 60%),
        radial-gradient(1200px 600px at 110% 120%, var(--lavender) 0%, transparent 60%),
        #f7f8fc;
      display:flex;align-items:center;justify-content:center;padding:24px;
    }
    .app{
      width:100%;max-width:880px;background:var(--card);
      border-radius:24px;box-shadow:0 10px 30px rgba(0,0,0,.06);
      overflow:hidden;border:1px solid rgba(0,0,0,.05);
    }
    header{
      padding:28px 24px;background:linear-gradient(135deg, var(--lavender) 0%, var(--mint) 100%);
      border-bottom:1px solid rgba(0,0,0,.05);
      text-align:center;
    }
    header h1{margin:0;font-size:clamp(22px, 3.5vw, 32px);font-weight:800;color:#2b2b2b}
    header p{margin:10px 0 0;font-size:clamp(13px, 2.3vw, 16px);opacity:.9}
    main{padding:24px}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .card{
      flex:1 1 280px;background:#fff;border:1px solid rgba(0,0,0,.06);
      border-radius:16px;padding:18px 16px
    }
    .pill{
      display:inline-flex;align-items:center;gap:8px;border-radius:999px;
      padding:8px 14px;background:rgba(90,191,165,.12);color:#246b5a;
      font-weight:700;font-size:14px;border:1px solid rgba(90,191,165,.25)
    }
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .segmented{display:inline-flex;border-radius:12px;overflow:hidden;border:1px solid rgba(0,0,0,.1)}
    .segmented button{
      appearance:none;border:0;background:#fff;padding:10px 14px;font-weight:700;cursor:pointer
    }
    .segmented button+button{border-left:1px solid rgba(0,0,0,.08)}
    .segmented .active{background:var(--lavender);}
    .btn{
      appearance:none;border:0;border-radius:12px;padding:12px 16px;font-size:16px;font-weight:800;
      background:linear-gradient(135deg,var(--lavender) 0%, var(--mint) 100%);
      cursor:pointer;box-shadow:0 6px 16px rgba(142,132,201,.25);transition:transform .05s ease;
    }
    .btn:active{transform:translateY(1px) scale(.995)}
    .result{
      margin-top:14px;border-radius:14px;padding:16px;background:linear-gradient(135deg, rgba(233,225,255,.6), rgba(207,248,234,.6));
      border:1px dashed rgba(0,0,0,.15);text-align:center
    }
    .topic{
      font-size:clamp(20px, 4.2vw, 36px);font-weight:900;margin:6px 0 2px
    }
    .hint{font-size:13px;opacity:.75}
    .howto li{margin:6px 0}
    footer{padding:18px 24px;border-top:1px solid rgba(0,0,0,.06);display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .small{font-size:12px;opacity:.75}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;background:rgba(233,225,255,.7);border:1px solid rgba(0,0,0,.06)}
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="ëœë¤ ê·¸ë¦¼ê·¸ë¦¬ê¸° ë„ì „ê²Œì„">
    <header>
      <h1>ê·¸ë¦¼ ì£¼ì œë¥¼ ë½‘ì•„ë³´ì„¸ìš”!</h1>
      <p class="mono">Random Drawing Challenge Â· Pastel Lavender &amp; Mint</p>
    </header>

    <main>
      <div class="row">
        <section class="card" aria-labelledby="game-title">
          <div class="pill" id="game-title">ğŸ¨ ëœë¤ ê·¸ë¦¼ê·¸ë¦¬ê¸° ë„ì „ê²Œì„</div>
          <div class="controls" aria-label="ë‚œì´ë„ ì„ íƒ">
            <div class="segmented" role="tablist" aria-label="ë‚œì´ë„">
              <button role="tab" aria-selected="true" class="active" data-level="í•˜" title="4â€“5ì„¸">í•˜</button>
              <button role="tab" aria-selected="false" data-level="ì¤‘" title="5â€“7ì„¸">ì¤‘</button>
              <button role="tab" aria-selected="false" data-level="ìƒ" title="ì´ˆë“± ì €í•™ë…„">ìƒ</button>
            </div>
            <button id="drawBtn" class="btn" aria-label="ê·¸ë¦¼ ì£¼ì œ ë½‘ê¸°">ê·¸ë¦¼ì£¼ì œ ë½‘ê¸° ğŸ²</button>
          </div>
          <div class="result" aria-live="polite">
            <div class="topic" id="topic">-</div>
            <div class="hint small">ë¬˜ì‚¬ì–´(ìƒíƒœÂ·í–‰ë™) + ëª…ì‚¬ê°€ ë¬´ì‘ìœ„ë¡œ ì¡°í•©ë©ë‹ˆë‹¤. ì¤‘ë³µÂ·ê³¼ì¥ ë¶€ì‚¬ëŠ” ì œì™¸ë©ë‹ˆë‹¤.</div>
          </div>
          <p class="small">â€» ê°™ì€ ì‚¬ëŒì´ ì—¬ëŸ¬ ë²ˆ ëˆŒëŸ¬ ë‹¤ì–‘í•œ ì£¼ì œë¥¼ ë½‘ì•„ë„ ì¢‹ìŠµë‹ˆë‹¤.</p>
        </section>

        <section class="card">
          <div class="pill">ğŸ§­ ê²Œì„ë°©ë²•</div>
          <ol class="howto">
            <li>ì¹œêµ¬ë‚˜ ê°€ì¡±ê³¼ ê°ê° ì œì‹œëœ ì£¼ì œë¡œ ê·¸ë¦¼ì„ ê·¸ë¦½ë‹ˆë‹¤.</li>
            <li>ì‹œê°„ì„ ì •í•´ì„œ(ì˜ˆ: 2~5ë¶„) ëª¨ë‘ ì™„ì„±í•©ë‹ˆë‹¤.</li>
            <li>ë‹¤ ê·¸ë¦° ë’¤ <b>â€œì§ !â€</b> í•˜ë©° ì„œë¡œì˜ ê·¸ë¦¼ì„ ë³´ì—¬ì£¼ì„¸ìš”.</li>
            <li>ê°€ì¥ ì°½ì˜ì Â·ì›ƒê¸´Â·ì„¬ì„¸í•œ ê·¸ë¦¼ ë“±ìœ¼ë¡œ ê°€ë³ê²Œ íˆ¬í‘œí•´ë„ ì¢‹ìŠµë‹ˆë‹¤.</li>
          </ol>
          <p class="small">íŒ: í•˜(4â€“5ì„¸) â†’ ì¤‘(5â€“7ì„¸) â†’ ìƒ(ì´ˆë“± ì €í•™ë…„) ìˆœìœ¼ë¡œ ë‚œì´ë„ë¥¼ ì˜¬ë ¤ ë¼ìš´ë“œ ê²Œì„ì²˜ëŸ¼ ì¦ê²¨ë³´ì„¸ìš”!</p>
        </section>
      </div>

      <div class="row" style="margin-top:16px;">
        <section class="card">
          <div class="pill">ğŸ“š ë‹¨ì–´ë±…í¬ ì •ë³´</div>
          <p class="small" id="bank-info">ê° ë‚œì´ë„ë³„ë¡œ ë¬˜ì‚¬ì–´ 100ê°œ + ëª…ì‚¬ 100ê°œê°€ ì¤€ë¹„ë˜ì–´ ìˆìœ¼ë©°, ë‚œì´ë„ë‹¹ ì•½ 10,000ê°€ì§€ ê·¸ë¦¼ ì£¼ì œ ì¡°í•©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì´ 30,000+)</p>
          <details>
            <summary>ë‚´ë¶€ ë™ì‘ ì›ë¦¬ ë³´ê¸°</summary>
            <ul class="small">
              <li>ì—°ë ¹ëŒ€ì— ë§ì¶˜ ì‰¬ìš´ <b>ë¬˜ì‚¬ì–´</b>ì™€ <b>ëª…ì‚¬</b>ë¥¼ <b>ì¤‘ë³µ ì—†ì´</b> 100ê°œì”© êµ¬ì„±í•©ë‹ˆë‹¤.</li>
              <li>ì¡°í•© ì‹œ <b>ì¤‘ë³µ ë‹¨ì–´Â·ëª…ì‚¬ ì¤‘ì²©Â·ë¶ˆí•„ìš”í•œ ë¶€ì‚¬</b>ë¥¼ ì œê±°í•©ë‹ˆë‹¤.</li>
              <li>ì˜ì¸í™”ê°€ ê°€ëŠ¥í•œ ìƒìƒ ì¡°í•©ì€ í—ˆìš©í•©ë‹ˆë‹¤: ì˜ˆ) í•˜ëŠ˜ ë‚˜ëŠ” ëƒ‰ì¥ê³ , ë…¸ë˜í•˜ëŠ” ë‹¬</li>
            </ul>
          </details>
        </section>
      </div>
    </main>

    <footer>
      <div class="badge">íŒŒìŠ¤í…” ì—°ë³´ë¼ Ã— ë¯¼íŠ¸</div>
      <div class="small">ë‚œì´ë„: í•˜(4â€“5ì„¸), ì¤‘(5â€“7ì„¸), ìƒ(ì´ˆë“± ì €í•™ë…„)</div>
    </footer>
  </div>

  <script>
    const rand = (arr) => arr[Math.floor(Math.random()*arr.length)];
    const shuffle = (arr) => arr.sort(() => Math.random() - 0.5);
    const STOP = ["ì˜","ì—","ì—ì„œ","ìœ¼ë¡œ","ì„","ë¥¼","ì€","ëŠ”","ì´","ê°€","ê³¼","ì™€","í•œ","ì†","ìœ„","ì•„ë˜","ì•ˆ","ë°–","ì•","ë’¤"];

    function tokenize(str){
      return str.replace(/[^ê°€-í£A-Za-z0-9\s]/g," ")
        .split(/\s+/).filter(t => t && !STOP.includes(t));
    }
    function overlapExists(a,b){
      const A = new Set(tokenize(a)); const B = new Set(tokenize(b));
      for(const t of A){ if(B.has(t)) return true; } return false;
    }

    const COLORS = ["íŒŒìŠ¤í…”","ë¼ë²¤ë”","ë¯¼íŠ¸","í•˜ëŠ˜ìƒ‰","ë¶„í™","ë…¸ë‘","ì´ˆë¡","ë³´ë¼","ì£¼í™©","íŒŒë‘","í•˜ì–‘","ê²€ì •"];
    const SIMPLE_OBJS = ["ì»µ","ì‚¬ê³¼","ë°”ë‚˜ë‚˜","ë”¸ê¸°","í† ë§ˆí† ","ì¼€ì´í¬","ì•„ì´ìŠ¤í¬ë¦¼","ë„ë„›","í’ì„ ","ìš°ì‚°","ì˜ì","ì—°í•„","ì‹œê³„","ì±…","ê°€ë°©","ëª¨ì","ì‹ ë°œ","ê³µ","ì—´ì‡ ","ë¦¬ë³¸"];
    const ANIMALS = ["í† ë¼","ê°•ì•„ì§€","ê³ ì–‘ì´","ê³°ëŒì´","ì˜¤ë¦¬","ë³‘ì•„ë¦¬","ê±°ë¶ì´","ë¬¼ê³ ê¸°","ì½”ë¼ë¦¬","ê¸°ë¦°","ì‚¬ì","ì—¬ìš°","í­ê·„"];
    const VEHICLES = ["ë²„ìŠ¤","ê¸°ì°¨","ìë™ì°¨","ìì „ê±°","ë¹„í–‰ê¸°","ë¡œì¼“"];
    const NATURES = ["í•´","ë‹¬","ë³„","êµ¬ë¦„","ë¬´ì§€ê°œ","ë‚˜ë¬´","ê½ƒ"];
    const FANTASY_OBJS = ["ë¡œë´‡","í”¼ì•„ë…¸","ëƒ‰ì¥ê³ ","ì‹œì†Œ","ê·¸ë„¤","ì—°","ì—´ê¸°êµ¬"];

    const A_HA = ["ì›ƒëŠ”","ìš°ëŠ”","ì¡¸ë¦°","í™”ë‚œ","ë†€ë€","ë°˜ì§ì´ëŠ”","ì í”„í•˜ëŠ”","ì¶¤ì¶”ëŠ”","ë…¸ë˜í•˜ëŠ”","ë‹¬ë¦¬ëŠ”","ê±·ëŠ”","ì•‰ì•„ ìˆëŠ”","ì„œ ìˆëŠ”","ìê³  ìˆëŠ”","ëŒì•„ê°€ëŠ”"];
    const N_HA_BASE = [...SIMPLE_OBJS, ...ANIMALS, ...NATURES, ...VEHICLES];

    const A_MID = ["í•˜ëŠ˜ ë‚˜ëŠ”","ë¬¼ì†ì— ìˆëŠ”","ê±°ê¾¸ë¡œ ì„ ","ë¹™ê¸€ ë„ëŠ”","ìˆ¨ì€","ë¹›ë‚˜ëŠ”","ë…¸ë˜ ë¶€ë¥´ëŠ”","ì¶¤ì¶”ëŠ”","ì í”„í•˜ëŠ”","ë‹¬ë¦¬ëŠ”","ì²œì²œíˆ ê±·ëŠ”"];
    const N_MID_BASE = [...ANIMALS, ...FANTASY_OBJS, ...SIMPLE_OBJS, ...VEHICLES, ...NATURES];

    const A_TOP = ["ë³„ì„ ì¤ëŠ”","êµ¬ë¦„ì„ ëª¨ìœ¼ëŠ”","ë‹¬ë¹›ì„ ë‹´ëŠ”","ë¬´ì¤‘ë ¥ì— ë–  ìˆëŠ”","ì‹œê°„ì„ ë˜ê°ëŠ”","ë¹›ì„ ë¹„ì¶”ëŠ”","ê¿ˆê¾¸ëŠ”","ë°”ëŒì„ íƒ€ëŠ”","í•˜ëŠ˜ ë‚˜ëŠ”","ë°”ë‹¤ë¥¼ ê±´ë„ˆëŠ”"];
    const N_TOP_BASE = ["ë¡œë´‡","ë²„ìŠ¤","ìš°ì²´êµ­","ì •ì›","ìƒì","ê³„ë‹¨","ë‹¤ë¦¬","ë„ì„œê´€","ì—´ê¸°êµ¬","ìš°ì£¼ë¹„í–‰ì‚¬","ë°”ëŒê°œë¹„","ëª¨ì","ë¶“","ë³‘","ë„ì‹œ"];

    function expandNouns(base, targetSize){
      const out = new Set(base); const palette = COLORS; const pool = [...base];
      while(out.size < targetSize){
        const n = rand(pool); const color = rand(palette);
        out.add(`${color} ${n}`);
      }
      return Array.from(out).slice(0, targetSize);
    }
    function expandAdjs(base, targetSize){
      const out = new Set(base);
      const extras = ["ë°˜ì§ë°˜ì§ ë¹›ë‚˜ëŠ”","ì¡°ìš©íˆ ì„œ ìˆëŠ”","ì‹ ë‚˜ê²Œ ì¶¤ì¶”ëŠ”","ì‘ê²Œ ì›ƒëŠ”","í¬ê²Œ ì›ƒëŠ”"];
      for(const e of extras){ if(out.size < targetSize) out.add(e); }
      while(out.size < targetSize){ out.add(rand(base)); }
      return Array.from(out).slice(0, targetSize);
    }

    const BANKS = {
      "í•˜": { adjectives: expandAdjs(A_HA, 100), nouns: expandNouns(N_HA_BASE, 100)},
      "ì¤‘": { adjectives: expandAdjs(A_MID, 100), nouns: expandNouns(N_MID_BASE, 100)},
      "ìƒ": { adjectives: expandAdjs(A_TOP, 100), nouns: expandNouns(N_TOP_BASE, 100)}
    };

    const ACTOR_REQUIRED = ["ë¨¹ëŠ”","ë§ˆì‹œëŠ”","ì½ëŠ”","ê·¸ë¦¬ëŠ”","ì“°ëŠ”"];
    function violatesActorRule(adj, noun){
      for(const v of ACTOR_REQUIRED){
        if(adj.startsWith(v)){
          const ok = new Set(ANIMALS.concat(["ì†Œë…„","ì†Œë…€","ì‚¬ëŒ","ìš°ì£¼ë¹„í–‰ì‚¬","ìš”ë¦¬ì‚¬","í™”ê°€","ìš°ì²´ë¶€"]));
          const toks = tokenize(noun);
          let allow = false; for(const t of toks){ if(ok.has(t)) { allow = true; break; } }
          return !allow;
        }
      }
      return false;
    }

    function cleanText(s){
      s = s.replace(/\s+/g," ").trim();
      s = s.replace(/(ë°˜ì§ë°˜ì§\s*)?ë°˜ì§ì´ëŠ”/g, "ë°˜ì§ì´ëŠ”");
      return s;
    }

    const tabs = document.querySelectorAll('[role="tab"]');
    let currentLevel = "í•˜";
    tabs.forEach(btn=>{
      btn.addEventListener("click", ()=>{
        tabs.forEach(b=>{ b.classList.remove("active"); b.setAttribute("aria-selected","false"); });
        btn.classList.add("active"); btn.setAttribute("aria-selected","true");
        currentLevel = btn.dataset.level;
      });
    });

    const topicEl = document.getElementById("topic");
    let lastCombo = "";
    function pickTopic(){
      const { adjectives, nouns } = BANKS[currentLevel];
      let combo = ""; let guard = 0;
      while(guard < 80){
        const adj = rand(adjectives); const noun = rand(nouns);
        if(overlapExists(adj, noun)) { guard++; continue; }
        if(violatesActorRule(adj, noun)) { guard++; continue; }
        combo = cleanText(`${adj} ${noun}`);
        if(combo.split(/\s+/).length > 6){ guard++; continue; }
        if(combo === lastCombo){ guard++; continue; }
        break;
      }
      if(!combo){ combo = "ë‹¤ì‹œ ë½‘ê¸°ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”!"; }
      lastCombo = combo; topicEl.textContent = combo;
    }

    document.getElementById("drawBtn").addEventListener("click", pickTopic);
    window.addEventListener("keydown", (e)=>{ if(e.key==="Enter") pickTopic(); });

    document.addEventListener("DOMContentLoaded", () => {
      const per = 100*100; const total = per*3;
      const info = document.getElementById("bank-info");
      if(info){ info.innerHTML = `ê° ë‚œì´ë„ë³„ë¡œ <b>ë¬˜ì‚¬ì–´ 100ê°œ + ëª…ì‚¬ 100ê°œ</b>ê°€ ì¤€ë¹„ë˜ì–´ ìˆìœ¼ë©°, ë‚œì´ë„ë‹¹ ì•½ <b>${per.toLocaleString()}</b>ê°€ì§€ ì¡°í•©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì´ <b>${total.toLocaleString()}</b>+)`; }
      setTimeout(()=>{
        topicEl.textContent = "ë‚œì´ë„(í•˜/ì¤‘/ìƒ)ë¥¼ ê³ ë¥´ê³  â€˜ê·¸ë¦¼ì£¼ì œ ë½‘ê¸° ğŸ²â€™ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”!";
      }, 100);
    });
  </script>
</body>
</html>
